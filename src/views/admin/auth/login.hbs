<div class="min-vh-100 d-flex align-items-center justify-content-center"
  style="background: url('/images/car-bg.jpg') no-repeat center center; background-size: cover;">

  <div class="bg-white rounded-3 shadow p-5" style="max-width: 400px; width: 100%;">
    <!-- Header -->
    <div class="text-center mb-4">
      <h2 class="fw-bold text-dark">Admin Panel</h2>
      <h1 class="h5 fw-bold mt-2 mb-1">Sign in to Admin Account</h1>
      <p class="text-muted mb-0">Restricted access only</p>
    </div>

    <!-- Alert -->
    <div id="alert" class="d-none text-center"></div>

    <!-- Form -->
    <form class="mt-4" id="loginForm">
      <div class="mb-3">
        <label for="adminEmail" class="form-label fw-medium small">Admin Email</label>
        <input type="email" class="form-control" id="adminEmail" name="email" placeholder="admin@example.com" required>
      </div>

      <div class="mb-3">
        <label for="adminPassword" class="form-label fw-medium small">Password</label>
        <input type="password" class="form-control" id="adminPassword" name="password" placeholder="Enter your password"
          required>
      </div>

      <div class="d-flex justify-content-between align-items-center mb-3">
        <div class="form-check">
          <input class="form-check-input" type="checkbox" id="rememberAdmin">
          <label class="form-check-label small text-muted" for="rememberAdmin">
            Remember me
          </label>
        </div>
        <a href="/admin/verify-email-page" class="small text-dark text-decoration-none">Forgot password?</a>
      </div>

      <button type="submit" class="btn btn-dark w-100 fw-medium">Admin Sign In</button>
    </form>
  </div>
</div>


<!-- Axios -->
<script>
  document.addEventListener("DOMContentLoaded", () => {
    const loginForm = document.getElementById("loginForm");
    const alertDiv = document.getElementById("alert");

    loginForm.addEventListener("submit", async (e) => {
      e.preventDefault();

      const formData = new FormData(loginForm);
      const data = Object.fromEntries(formData.entries());

      try {
        const res = await axios.post("/admin/login", data, { withCredentials: true });

        // Success case (200)
        if (res.data.success) {
          alertDiv.className = "alert alert-success text-center";
          alertDiv.textContent = "Login successful! Redirecting...";
          alertDiv.classList.remove("d-none");
          setTimeout(() => window.location.href = res.data.redirect, 400);
        }
      } catch (error) {
        // Error case (403, 500, etc.)
        const message = error.response?.data?.message || "Invalid credentials or server error.";
        alertDiv.className = "alert alert-danger text-center";
        alertDiv.textContent = message;
        alertDiv.classList.remove("d-none");
      }
    });
  });
</script>