<div class="bg-light min-vh-100 d-flex align-items-center justify-content-center py-5">
  <div class="bg-white rounded-3 shadow p-5" style="max-width: 500px; width: 100%;">
    <div class="text-center mb-4">
      <a href="/" class="h2 fw-bold text-dark text-decoration-none">LuxCart</a>
      <h1 class="h5 fw-bold mt-3 mb-2">Reset Your Password</h1>
      <p class="text-muted small mb-0">Enter your new password below</p>
    </div>

    <!-- Alert -->
    <div id="alert" class="d-none text-center"></div>

    <form id="passwordChange" method="POST" class="mt-4">
      <div class="mb-3">
        <label for="newPassword" class="form-label fw-medium small">New Password</label>
        <input type="password" class="form-control" id="newPassword" name="newPassword" placeholder="Enter new password"
          required>
      </div>

      <div class="mb-3">
        <label for="confirmPassword" class="form-label fw-medium small">Confirm Password</label>
        <input type="password" class="form-control" id="confirmPassword" name="confirmPassword"
          placeholder="Confirm new password" required>
      </div>

      <button type="submit" class="btn btn-dark w-100 fw-medium">Reset Password</button>
    </form>

    <div class="text-center mt-4">
      <a href="/login" class="small text-muted text-decoration-none">&larr; Back to Sign In</a>
    </div>
  </div>
</div>

<script>
  document.addEventListener("DOMContentLoaded", () => {
    const newPasswordForm = document.getElementById("passwordChange")
    const alert = document.getElementById("alert")

    //axios code
    newPasswordForm.addEventListener("submit", async (e) => {
      e.preventDefault()
      const formData = new FormData(newPasswordForm)
      const data = Object.fromEntries(formData.entries())

      //desing the alert 
      alert.className = "alert alert-info text-center";
      alert.textContent = "Processing......";
      alert.classList.remove("d-none");
      try {
        const res = await axios.post("/admin/change-password", data)
        if (res.data.success) {
          alert.className = "alert alert-success text-center";
          alert.textContent = "Password changed successfully......";
          alert.classList.remove("d-none");
          setTimeout(() => window.location.href = res.data.redirect, 800)
        }
      } catch (error) {
        const message = error.response?.data?.alert || "Invalid Email.";
        alert.className = "alert alert-danger text-center";
        alert.textContent = message;
        alert.classList.remove("d-none");
      }
    })
  })
</script>