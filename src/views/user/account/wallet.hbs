<style>
  body {
    background: #f8f9fa;
  }

  .section {
    display: none;
  }

  .section.active {
    display: block;
  }

  .payment-card {
    border: 1px solid #e5e7eb;
    border-radius: 8px;
    padding: 16px;
    cursor: pointer;
  }

  .payment-card:hover {
    border-color: #000;
    background: #f9fafb;
  }
</style>
</head>

<body>

  <div class="container py-4">

    <h4 class="fw-bold mb-4">My Wallet</h4>

    <!-- ================= WALLET OVERVIEW ================= -->
    <div id="section-wallet" class="section active">

      <div class="card mb-4">
        <div class="card-body d-flex justify-content-between align-items-center">
          <div>
            <small class="text-muted">Available Balance</small>
            <h3 class="fw-bold" id="balance">â‚¹ {{#if wallet.balance}}{{formatPrice wallet.balance}}{{else}}0{{/if}}</h3>
          </div>
          <button class="btn btn-dark" onclick="showSection('add')">
            + Add Money
          </button>
        </div>
      </div>

      <div class="card">
        <div class="card-body">
          <h6 class="fw-bold mb-3">Transaction History</h6>
          {{#if wallet.transactionHistory.length}}
          <div class="table-responsive">
            <table class="table table-bordered table-hover align-middle">
              <thead class="table-dark">
                <tr>
                  <th>Date</th>
                  <th>Message</th>
                  <th>Type</th>
                  <th>Flow</th>
                  <th class="text-end">Amount</th>
                </tr>
              </thead>
              <tbody>
                {{#each wallet.transactionHistory}}
                <tr>
                  <td>
                    {{formattedDate this.date}}
                  </td>

                  <td>
                    {{this.message}}
                  </td>

                  <td class="text-capitalize">
                    {{this.type}}
                  </td>

                  <td>
                    {{#if (eq this.flow "credit")}}
                    <span class="badge bg-success">Credit</span>
                    {{else}}
                    <span class="badge bg-danger">Debit</span>
                    {{/if}}
                  </td>

                  <td class="text-end fw-bold">
                    {{#if (eq this.flow "credit")}}
                    <span class="text-success">+â‚¹ {{formatPrice this.amount}}</span>
                    {{else}}
                    <span class="text-danger">-â‚¹ {{formatPrice this.amount}}</span>
                    {{/if}}
                  </td>
                </tr>
                {{/each}}
              </tbody>
            </table>
          </div>
          {{else}}
          <div class="alert alert-secondary text-center">
            No transactions found
          </div>
          {{/if}}


          <!-- <div class="d-flex justify-content-between">
            <div>
              <strong>Order #ORD-12345</strong>
              <div class="text-muted small">TXN-1002</div>
            </div>
            <span class="text-danger">-â‚¹200</span>
          </div> -->

        </div>
      </div>
    </div>

    <!-- ================= ADD AMOUNT ================= -->
    <div id="section-add" class="section">
      <div class="card">
        <div class="card-body">
          <h6 class="fw-bold mb-3">Add Money</h6>

          <input type="number" id="amountInput" class="form-control mb-3" placeholder="Enter amount">

          <div class="text-end">
            <button class="btn btn-outline-secondary" onclick="showSection('wallet')">Cancel</button>
            <button class="btn btn-dark" onclick="goToPayment()">Continue</button>
          </div>
        </div>
      </div>
    </div>

    <!-- ================= PAYMENT METHOD ================= -->
    <div id="section-payment" class="section">
      <div class="card">
        <div class="card-body">
          <h6 class="fw-bold mb-3">Payment Method</h6>

          <div class="payment-card mb-3" onclick="selectUPI()">
            <i class="bi bi-phone"></i> <strong>UPI</strong>
            <div class="text-muted small">Pay instantly via UPI</div>
          </div>

          <div class="payment-card mb-3">
            <i class="bi bi-credit-card"></i> <strong>Credit / Debit Card</strong>
          </div>

          <div class="payment-card">
            <i class="bi bi-bank"></i> <strong>Net Banking</strong>
          </div>

        </div>
      </div>
    </div>

    <!-- ================= UPI ================= -->
    <div id="section-upi" class="section">
      <div class="card">
        <div class="card-body">
          <h6 class="fw-bold mb-3">UPI Payment</h6>

          <input type="text" class="form-control mb-3" placeholder="username@bank">

          <button class="btn btn-warning w-100 fw-semibold" onclick="confirmPayment()">
            Confirm Payment
          </button>

          <small class="text-muted d-block text-center mt-2">
            ðŸ”’ 256-bit SSL Secure Payment
          </small>
        </div>
      </div>
    </div>

    <!-- ================= SUCCESS ================= -->
    <div id="section-success" class="section">
      <div class="alert alert-success">
        âœ… Successfully added <strong id="successAmount"></strong>
      </div>
      <button class="btn btn-dark" onclick="showSection('wallet')">
        Back to Wallet
      </button>
    </div>

  </div>

  <!-- ================= JS ================= -->
  <script>
    let currentAmount = 0;
    let walletBalance = 500;

    function showSection(name) {
      document.querySelectorAll('.section').forEach(sec => sec.classList.remove('active'));
      document.getElementById(`section-${name}`).classList.add('active');
    }

    function goToPayment() {
      const value = document.getElementById('amountInput').value;
      if (!value || value <= 0) {
        alert('Enter a valid amount');
        return;
      }
      currentAmount = Number(value);
      showSection('payment');
    }

    function selectUPI() {
      showSection('upi');
    }

    function confirmPayment() {
      walletBalance += currentAmount;
      document.getElementById('balance').innerText = `â‚¹${walletBalance}`;
      document.getElementById('successAmount').innerText = `â‚¹${currentAmount}`;
      showSection('success');
    }
  </script>