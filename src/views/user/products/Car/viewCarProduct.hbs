<!--custom stylesheet -->
<link rel="stylesheet" href="/css/user/products/car/viewCarProduct.css">

<section class="car-page">
  <div class="container">
    <div class="row g-4">

      <!-- LEFT SIDE: CAR IMAGE CAROUSEL -->
      <div class="col-lg-7">
        <div class="car-header">
          <h2>{{singleCar.name}}</h2>
          <small>{{singleCar.year}} • {{singleCar.mileage}} • {{singleCar.region}}</small>
        </div>

        <!-- Unified Bootstrap Carousel with auto-slide enabled -->
        <div id="carImageCarousel" class="carousel slide" data-bs-ride="carousel" data-bs-interval="3500"
          data-bs-pause="hover">
          <div class="carousel-inner">
            {{#each singleCar.variantIds.[0].image_url}}
            <div class="carousel-item {{#if @first}}active{{/if}}">
              <div class="zoom-container">
                <img src="{{this}}" class="d-block w-100 car-main-img" alt="{{../singleCar.name}}">
              </div>
            </div>
            {{/each}}
          </div>
          <button class="carousel-control-prev" type="button" data-bs-target="#carImageCarousel" data-bs-slide="prev">
            <span class="carousel-control-prev-icon" aria-hidden="true"></span>
            <span class="visually-hidden">Previous</span>
          </button>
          <button class="carousel-control-next" type="button" data-bs-target="#carImageCarousel" data-bs-slide="next">
            <span class="carousel-control-next-icon" aria-hidden="true"></span>
            <span class="visually-hidden">Next</span>
          </button>
        </div>
      </div>

      <!-- RIGHT SIDE -->
      <div class="col-lg-5">
        <div class="price-box">
          <div class="d-flex justify-content-between align-items-center mb-3">
            <div class="price">₹{{singleCar.variantIds.[0].price}}</div>
            <i class="bi bi-heart fs-5 text-muted"></i>
          </div>

          <!-- VARIANT BUTTONS -->
          {{#if (gt (length singleCar.variantIds) 1)}}
          <div class="variant-section mb-3">
            <h5 class="fw-semibold mb-3">Available Variants</h5>
            <div class="d-flex flex-wrap gap-2">
              {{#each singleCar.variantIds}}
              <button class="variant-btn btn btn-outline-dark" data-color="{{this.color}}" data-price="{{this.price}}"
                data-images='{{{json this.image_url}}}' onclick="changeVariant(this)">
                {{this.color}}
              </button>
              {{/each}}
            </div>
          </div>
          {{/if}}

          <div class="info-text">Year: {{singleCar.year}}</div>
          <div class="info-text">Region: {{singleCar.region}}</div>
          <div class="info-text mb-3">Warranty: {{singleCar.warranty}}</div>

          <button class="btn btn-buy"><i class="bi bi-lightning-charge"></i> Buy Now</button>
          <button class="btn btn-cart"><i class="bi bi-cart"></i> Add to Cart</button>
        </div>
      </div>

    </div>

    <!-- DESCRIPTION -->
    <div class="description-section mt-5">
      <h4>Description</h4>
      <div class="description-text" id="descriptionText">
        {{{formatDescription singleCar.description}}}
      </div>
      <button class="btn btn-outline-dark mt-3" id="toggleDescBtn">Read More</button>
    </div>

    <!-- ACCORDION SECTION -->
    <div class="accordion-section mt-5">
      <div class="accordion">
        <div class="accordion-header" onclick="toggleAccordion(this)">
          Performance Specifications <i class="bi bi-chevron-down"></i>
        </div>
        <div class="accordion-content">
          <ul>
            <li><strong>Top Speed:</strong> {{singleCar.top_speed}}</li>
            <li><strong>Power (HP):</strong> {{singleCar.power_hp}}</li>
            <li><strong>Engine:</strong> {{singleCar.engine}}</li>
            <li><strong>Transmission:</strong> {{singleCar.transmission}}</li>
            <li><strong>Drive Type:</strong> {{singleCar.drive_type}}</li>
            <li><strong>Acceleration:</strong> {{singleCar.acceleration_0_100}}</li>
          </ul>
        </div>
      </div>

      <div class="accordion">
        <div class="accordion-header" onclick="toggleAccordion(this)">
          Exterior & Interior <i class="bi bi-chevron-down"></i>
        </div>
        <div class="accordion-content">
          <ul>
            <li><strong>Colors:</strong> {{singleCar.interiorAndExteriorColor}}</li>
            <li><strong>Wheels:</strong> {{singleCar.wheels}}</li>
            <li><strong>Upholstery:</strong> {{singleCar.upholstery}}</li>
            <li><strong>Design:</strong> {{singleCar.design}}</li>
          </ul>
        </div>
      </div>

      <div class="accordion">
        <div class="accordion-header" onclick="toggleAccordion(this)">
          Technology & Assistance <i class="bi bi-chevron-down"></i>
        </div>
        <div class="accordion-content">
          <ul>
            <li><strong>Cameras:</strong> {{singleCar.cameras}}</li>
            <li><strong>Lane Assist:</strong> {{singleCar.lane_assist}}</li>
            <li><strong>Sound System:</strong> {{singleCar.sound_system}}</li>
            <li><strong>Keyless Go:</strong> {{singleCar.keyless_go}}</li>
          </ul>
        </div>
      </div>
    </div>
  </div>
</section>

<script src="/js/user/products/car/viewCarProduct.js"></script>