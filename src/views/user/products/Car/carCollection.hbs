<link rel="stylesheet" href="/css/user/products/products.css">

<div class="container-fluid py-5 px-4">
  <!-- Title Section -->
  <div class="mb-5 text-center">
    <h3 class="page-title display-5 mt-5 mb-2">Our Collection</h3>
    <p class="section-subtitle">Discover our handpicked selection of exceptional automobiles.</p>
  </div>

  <!-- Search and Filter Row -->
  <div class="row">
    <!-- Filters Sidebar -->
    <div class="col-md-3 col-lg-2 mb-4">
      <div class="filter-sidebar p-4" id="filterSidebar">
        <div class="d-flex justify-content-between align-items-center mb-4">
          <h6 class="filter-title mb-0">Filters</h6>
          <a href="#" class="clear-filters" id="clearFiltersBtnDesk">Clear All</a>
        </div>

        <!-- Price Filter -->
        <h6 class="filter-title mt-4">Price</h6>
        <div class="form-check mb-2">
          <input class="form-check-input" name="FilterPrice" value="low-price" type="checkbox" id="priceMin" />
          <label class="form-check-label" for="brand">Lowest price</label>
        </div>
        <div class="form-check mb-2">
          <input class="form-check-input" name="FilterPrice" value="high-price" type="checkbox" id="priceMax" />
          <label class="form-check-label" for="brand">Highest price</label>
        </div>


        <!-- Brand Filter -->
        <h6 class="filter-title mt-4">Brand</h6>
        {{#each brands}}
        <div class="form-check mb-2">
          <input class="form-check-input" name="FilterBrands" value="{{this.name}}" type="checkbox"
            id="brand-{{@index}}" />
          <label class="form-check-label" for="brand-{{@index}}">{{this.name}}</label>
        </div>
        {{/each}}

        <!-- Category Filter -->
        <h6 class="filter-title mt-4">Category</h6>
        {{#each categories}}
        <div class="form-check mb-2">
          <input class="form-check-input" name="FilterCategories" value="{{this.name}}" type="checkbox"
            id="category-{{@index}}" />
          <label class="form-check-label" for="category-{{@index}}">{{this.name}}</label>
        </div>
        {{/each}}

        <!-- Type Filter -->
        <h6 class="filter-title mt-4">Type</h6>
        {{#each types}}
        <div class="form-check mb-2">
          <input class="form-check-input" name="FilterTypes" value="{{this.name}}" type="checkbox"
            id="type-{{@index}}" />
          <label class="form-check-label" for="type-{{@index}}">{{this.name}}</label>
        </div>
        {{/each}}

        <div class="mobile-filter-actions">
          <button class="desk-save-btn save-btn" id="saveFiltersBtn">Save</button>
        </div>

      </div>
    </div>

    <!-- Cars Grid -->
    <div class="col-md-9 col-lg-10">
      <!-- Mobile Filter Button and Search Input -->
      <div class="mobile-filter-search">
        <button class="mobile-filter-btn" id="filterToggleBtn">Filter</button>
        <input type="text" class="form-control mobile-search-input"
          placeholder=" Search by brand, model or category..." />
      </div>

      <!-- Desktop Search Input -->
      <div class="mb-4">
        <input type="text" class="form-control search-input" placeholder=" Search by brand, model or category..." />
      </div>

      <!-- Cars List -->
      <div class="row g-4 car-list" id="carList">
        {{#each cars}}
        <div class="col-md-6 col-lg-4">
          <div class="card car-card">
            <div class="car-image-wrapper position-relative">
              <img src="{{firstImage variantIds}}" alt="{{name}}" class="car-image" />
              {{#if category_id.name}}
              <span
                class="badge category-badge position-absolute top-0 start-0 m-3 text-capitalize">{{category_id.name}}</span>
              {{/if}}
            </div>
            <div class="card-body p-4">
              <h6 class="brand-name mb-2">{{brand_id.name}}</h6>
              <h5 class="car-name">{{name}}</h5>
              <div class="d-flex justify-content-between align-items-center mt-3">
                {{#if isListed}}
                <span class="price-tag">₹{{formatPrice price}}</span>
                {{else}}
                <span class="price-tag text-danger fw-bold">Not Available</span>
                {{/if}}
                <span class="year-badge">{{year}}</span>
              </div>
            </div>
            <div class="card-footer bg-white text-center border-0 p-3">
              <a href="/cars-collection/view-car-product/{{_id}}" class="btn view-details-btn w-100">View Details</a>
            </div>
          </div>
        </div>
        {{/each}}
      </div>

      <!-- Pagination -->
      <nav class="mt-5" id="paginationSecction">
        <ul class="pagination justify-content-center">
          <li class="page-item active"><a class="page-link" href="#">1</a></li>
          <li class="page-item"><a class="page-link" href="#">2</a></li>
          <li class="page-item"><a class="page-link" href="#">3</a></li>
        </ul>
      </nav>
    </div>
  </div>
</div>

<!-- Mobile filter sliding panel -->
<div class="mobile-filter-panel" id="mobileFilterPanel" aria-hidden="true" aria-label="Filter options panel">
  <div>
    <div class="d-flex justify-content-between align-items-center mb-4">
      <h6 class="filter-title mb-0">Filters</h6>
      <button id="closeFilterBtn" aria-label="Close filter panel"
        style="border:none; background:none; font-size:1.5rem; cursor:pointer;">×</button>
    </div>
    <h6 class="filter-title mt-4">Price</h6>

    <div class="form-check mb-2">
      <input class="form-check-input" name="FilterPrice" value="low-price" type="checkbox" id="priceMin" />
      <label class="form-check-label" for="brand">Lowest price</label>
    </div>
    <div class="form-check mb-2">
      <input class="form-check-input" name="FilterPrice" value="high-price" type="checkbox" id="priceMax" />
      <label class="form-check-label" for="brand">Highest price</label>
    </div>

    <!-- Brand Filter -->
    <h6 class="filter-title mt-4">Brand</h6>
    {{#each brands}}
    <div class="form-check mb-2">
      <input class="form-check-input" name="FilterBrands" value="{{this.name}}" type="checkbox"
        id="mobile-brand-{{@index}}" />
      <label class="form-check-label" for="mobile-brand-{{@index}}">{{this.name}}</label>
    </div>
    {{/each}}

    <!-- Category Filter -->
    <h6 class="filter-title mt-4">Category</h6>
    {{#each categories}}
    <div class="form-check mb-2">
      <input class="form-check-input" name="FilterCategories" type="checkbox" value="{{this.name}}"
        id="mobile-category-{{@index}}" />
      <label class="form-check-label" for="mobile-category-{{@index}}">{{this.name}}</label>
    </div>
    {{/each}}

    <!-- Type Filter -->
    <h6 class="filter-title mt-4">Type</h6>
    {{#each types}}
    <div class="form-check mb-2">
      <input class="form-check-input" name="FilterTypes" type="checkbox" value="{{this.name}}"
        id="mobile-type-{{@index}}" />
      <label class="form-check-label" for="mobile-type-{{@index}}">{{this.name}}</label>
    </div>
    {{/each}}

    <div class="mobile-filter-actions">
      <button class="mobile-clear-btn " id="clearFiltersBtn">Clear All</button>
      <button class="mobile-save-btn save-btn" id="saveFiltersBtnMobile">Save</button>
    </div>
  </div>
</div>


<script src="/js/utility/pageloadAnimation.js"></script>
<script src="/js/utility/renderProducts.js"></script>
<script src="/js/user/products/products.js"></script>